<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>GOAL2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="Alex Stelea">

<!-- Le styles -->
<link href="css/bootstrap.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/overrides.css">
<link rel="stylesheet" href="css/jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>


<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script src="js/world.js"></script>
<script>

//Not implemented
function findOnMap(){

  var geocoder = new google.maps.Geocoder();

  var address = document.getElementById("latlon").value;
  console.log(address);
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK)
    {
      console.log(results[0]);
      var mapObject = $('#world-map').vectorMap('get', 'mapObject');
      mapObject.setFocusLatLng(8,results[0].geometry.location.pb , results[0].geometry.location.qb);


    }
  });

  

  }
</script>

<link href="css/bootstrap-responsive.css" rel="stylesheet">

</head>

<body style="zoom: 1;">

  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="brand" href="#">GOAL2</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li class="active"><a href="#">Map</a></li>
          </ul>
          <form action="javascript:findOnMap();" class="navbar-search pull-right latlon-form">
            <input type="text" class="span4 search-query" id="latlon" placeholder="Search">

          </form>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>


  <div class="container-fluid wrapper">

    <p style="margin-left: 20px; margin-top:80px; text-align: center;color: grey; ">Click on a country to view trends over time and relevant education policy interventions</p>

    <div id="world-map" style="width:100%; height: 100%;"></div>



  </div> <!-- /container -->


<!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="./index_files/jquery.js"></script>
  <script src="./index_files/bootstrap-transition.js"></script>
  <script src="./index_files/bootstrap-alert.js"></script>
  <script src="./index_files/bootstrap-modal.js"></script>
  <script src="./index_files/bootstrap-dropdown.js"></script>
  <script src="./index_files/bootstrap-scrollspy.js"></script>
  <script src="./index_files/bootstrap-tab.js"></script>
  <script src="./index_files/bootstrap-tooltip.js"></script>
  <script src="./index_files/bootstrap-popover.js"></script>
  <script src="./index_files/bootstrap-button.js"></script>
  <script src="./index_files/bootstrap-collapse.js"></script>
  <script src="./index_files/bootstrap-carousel.js"></script>
  <script src="./index_files/bootstrap-typeahead.js"></script>
<script src="js/jquery-jvectormap-1.2.2.min.js"></script>
<script src="js/jquery-jvectormap-world-mill-en.js"></script>
  <script>
  var rateData = {
    "CR": 99.09,
    "KH": 89.9,
    "MW": 71.16,
    "DZ": 94,
    "AG": 92,
    "AR": 108,
    "AW": 93,
    "AU": 92,
    "AT": 96,
    "AZ": 92,
    "BB": 114,
    "BY": 103,
    "BZ": 107,
    "BJ": 66,
    "BT": 105,
    "BA": 76,
    "BF": 54,
    "BI": 62,
    "KH": 90,
    "CM": 72,
    "CV": 96,
    "CF": 33,
  };
  $(function(){

    $('#world-map').vectorMap({

      map: 'world_mill_en',
      backgroundColor: '#8c97a4',
      markerStyle: {
        initial: {
          fill: '#F8E23B',
          stroke: '#383f47'
        }
      },
      hoverOpacity: 0.7,
      hoverColor: false,
      regionsSelectable: true,
      regionsSelectableOne: true,

      focusOn: 
      {
        x: 0.5,
        y: 0.5,
        scale: 1.5
      },
      series: {
        regions: [{
          values: rateData,
          scale: ['#C8EEFF', '#0071A4'],
          normalizeFunction: 'polynomial'
        }]
      },
      onRegionLabelShow: function(e, el, code){
        if (rateData[code] == undefined){
          rateData[code] = "N/A";
        }
        el.html(el.html()+' (Primary School Completion Rate - '+'<strong>'+rateData[code]+'</strong>)');
      },
      onRegionClick: function(event, code){
        if (code == "CR") {
          window.location.href = "costarica.html";
        }
        if (code == "KH") {
          window.location.href = "cambodia.html";
        }
        if (code == "MW") {
          window.location.href = "malawi.html";
        }
      }
    });
 var mapObject = $('#world-map').vectorMap('get', 'mapObject');
mapObject.setFocusLatLng = function(scale, lat, lng){
        var point,
            proj = jvm.WorldMap.maps[this.params.map].projection,
            centralMeridian = proj.centralMeridian,
            width = this.width - this.baseTransX * 2 * this.baseScale,
            height = this.height - this.baseTransY * 2 * this.baseScale,
            inset,
            bbox,
            scaleFactor = this.scale / this.baseScale,
            centerX,
            centerY;

        if (lng < (-180 + centralMeridian)) {
            lng += 360;
        }

        point = jvm.Proj[proj.type](lat, lng, centralMeridian);

        inset = this.getInsetForPoint(point.x, point.y);
        if (inset) {
            bbox = inset.bbox;

            centerX = (point.x - bbox[0].x) / (bbox[1].x - bbox[0].x);
            centerY = (point.y - bbox[0].y) / (bbox[1].y - bbox[0].y);

            this.setFocus(scale, centerX, centerY);
        }
    }
});

</script>



</body></html>